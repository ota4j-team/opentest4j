# Development Notes

## Difference ValueDescriptor vs. ValueWrapper

While developing the `ValueWrapper` it seems at some points that the
`ValueWrapper` could actually replace the `ValueDescriptor`. It just needs
to store identity hashcode and value of `toString` in the data map.

But: The roles are slightly different. A `ValueWrapper` is especially
responsible for providing a serializable representation of the object so
that the `ValueDescriptor` can try its best to store the value in a convenient
manner to be part of the exception description (thus it needs to be
serializable).
 
The `ValueWrapper` is especially meant to be used internally within the
`ValueDescriptor`. That is why the `ValueDescriptor` provides no direct
access to the `ValueWrapper`.


## ValueWrapper: Object or Generics?

Should the ValueWrapper return the stored value as object or as
generic type? Using `Object` as return type provides more flexibility
to the `ValueWrapper`. It might for example decide that the deserialized
object is of another type than the serialized one. Using a generic
type would prevent this feature.

## Provide RenderedImageSerializer?

Should the core of OpenTest4J provide a serializer for rendered images?
In terms of providing the very core for test assertions it should not
be part of it. Nevertheless it is a typical for example for UI
tests what you would provide a screenshot in addition to other debug
information.

So we might place it into the tests section to serve as example and as
test for the extensibility. Or we might provide a separate module/project
with examples for serializers.

## Using Java Service Provider Framework?

The advantage of this framework is, that it is at hand without any
additional dependencies. And: It provides a good extension point for
additional serializers.

But it also raises some questions:

* Should the `DefaultValueSerializer` be part of the service configuration
    and as such overridable?
* Is it ok just to rely on the classloader order to control the order of
    serializers?
    
## DebugInformationDefaultKey

I think it is useful to provide some common defaults we agree upon. But
what are these defaults? expected, actual and perhaps a mismatchDescription?
And is it better to provide it as enum or just plain String constants?
